// Generated by GitHub Copilot. Directed and reviewed by Ralph Walden.
// Licensed under Apache 2.0. This file is not subject to copyright.

#include "kwx_wrapper.h"

wxDragResult kwxTextDropTarget::OnData(wxCoord x, wxCoord y, wxDragResult def)
{
    if (on_data_func)
        return (wxDragResult) on_data_func(obj, (long) x, (long) y, (int) def);
    else
        return wxTextDropTarget::OnData(x, y, def);
}

bool kwxTextDropTarget::OnDrop(wxCoord x, wxCoord y)
{
    if (on_drop_func)
        return (bool) on_drop_func(obj, (long) x, (long) y);
    else
        return wxTextDropTarget::OnDrop(x, y);
}

wxDragResult kwxTextDropTarget::OnEnter(wxCoord x, wxCoord y, wxDragResult def)
{
    if (on_enter_func)
        return (wxDragResult) on_enter_func(obj, (long) x, (long) y, (int) def);
    else
        return wxTextDropTarget::OnEnter(x, y, def);
}

wxDragResult kwxTextDropTarget::OnDragOver(wxCoord x, wxCoord y, wxDragResult def)
{
    if (on_drag_func)
        return (wxDragResult) on_drag_func(obj, (long) x, (long) y, (int) def);
    else
        return wxTextDropTarget::OnDragOver(x, y, def);
}

void kwxTextDropTarget::OnLeave()
{
    if (on_leave_func)
        on_leave_func(obj);
    else
        wxTextDropTarget::OnLeave();
}

wxDragResult kwxFileDropTarget::OnData(wxCoord x, wxCoord y, wxDragResult def)
{
    if (on_data_func)
        return (wxDragResult) on_data_func(obj, (long) x, (long) y, (int) def);
    else
        return wxFileDropTarget::OnData(x, y, def);
}

bool kwxFileDropTarget::OnDrop(wxCoord x, wxCoord y)
{
    if (on_drop_func)
        return (bool) on_drop_func(obj, (long) x, (long) y);
    else
        return wxFileDropTarget::OnDrop(x, y);
}

wxDragResult kwxFileDropTarget::OnEnter(wxCoord x, wxCoord y, wxDragResult def)
{
    if (on_enter_func)
        return (wxDragResult) on_enter_func(obj, (long) x, (long) y, (int) def);
    else
        return wxFileDropTarget::OnEnter(x, y, def);
}

wxDragResult kwxFileDropTarget::OnDragOver(wxCoord x, wxCoord y, wxDragResult def)
{
    if (on_drag_func)
        return (wxDragResult) on_drag_func(obj, (long) x, (long) y, (int) def);
    else
        return wxFileDropTarget::OnDragOver(x, y, def);
}

void kwxFileDropTarget::OnLeave()
{
    if (on_leave_func)
        on_leave_func(obj);
    else
        wxFileDropTarget::OnLeave();
}

wxDragResult kwxDropTarget::OnData(wxCoord x, wxCoord y, wxDragResult def)
{
    if (on_data_func)
        return (wxDragResult) on_data_func(obj, (long) x, (long) y, (int) def);
    else
    {
        GetData();
        return def;
    }
}

bool kwxDropTarget::OnDrop(wxCoord x, wxCoord y)
{
    if (on_drop_func)
        return (bool) on_drop_func(obj, (long) x, (long) y);
    else
        return wxDropTarget::OnDrop(x, y);
}

wxDragResult kwxDropTarget::OnEnter(wxCoord x, wxCoord y, wxDragResult def)
{
    if (on_enter_func)
        return (wxDragResult) on_enter_func(obj, (long) x, (long) y, (int) def);
    else
        return wxDropTarget::OnEnter(x, y, def);
}

wxDragResult kwxDropTarget::OnDragOver(wxCoord x, wxCoord y, wxDragResult def)
{
    if (on_drag_func)
        return (wxDragResult) on_drag_func(obj, (long) x, (long) y, (int) def);
    else
        return wxDropTarget::OnDragOver(x, y, def);
}

void kwxDropTarget::OnLeave()
{
    if (on_leave_func)
        on_leave_func(obj);
    else
        wxDropTarget::OnLeave();
}

bool kwxFileDropTarget::OnDropFiles(wxCoord x, wxCoord y, const wxArrayString& filenames)
{
    bool result = false;
    std::vector<std::string> strings(filenames.GetCount());
    auto arr = std::make_unique<const char*[]>(filenames.GetCount());

    for (unsigned int i = 0; i < filenames.GetCount(); i++)
    {
        strings[i] = filenames.Item(i).utf8_string();
        arr[i] = strings[i].data();
    }

    result = func(obj, (long) x, (long) y, (void*) arr.get(), (int) filenames.GetCount()) != 0;

    return result;
}

bool kwxTextDropTarget::OnDropText(wxCoord x, wxCoord y, const wxString& text)
{
    return func(obj, (long) x, (long) y, (void*) text.utf8_string().data()) != 0;
}

extern "C"
{
    EXPORT void* kwxFileDropTarget_Create(void* self, void* pFunction)
    {
        return (void*) new kwxFileDropTarget(self, (FileDropFunc) pFunction);
    }

    EXPORT void kwxFileDropTarget_Delete(kwxFileDropTarget* self)
    {
        delete self;
    }

    EXPORT void* kwxTextDropTarget_Create(void* self, void* pFunction)
    {
        return (void*) new kwxTextDropTarget(self, (TextDropFunc) pFunction);
    }

    EXPORT void kwxTextDropTarget_Delete(kwxTextDropTarget* self)
    {
        delete self;
    }

    EXPORT void* TextDataObject_Create(wxString* text)
    {
        return (void*) new wxTextDataObject(*text);
    }

    EXPORT void TextDataObject_Delete(void* self)
    {
        delete (wxTextDataObject*) self;
    }

    EXPORT wxString* TextDataObject_GetText(void* self)
    {
        wxString* result = new wxString();
        *result = ((wxTextDataObject*) self)->GetText();
        return result;
    }

    EXPORT void TextDataObject_SetText(void* pObject, wxString* strText)
    {
        ((wxTextDataObject*) pObject)->SetText(*strText);
    }

    EXPORT void* FileDataObject_Create(int count, void* list)
    {
        wxFileDataObject* result = new wxFileDataObject();
        if (count)
        {
            for (int i = 0; i < count; i++)
                result->AddFile(((char**) list)[i]);
        }
        return (void*) result;
    }

    EXPORT void FileDataObject_Delete(void* self)
    {
        delete (wxFileDataObject*) self;
    }

    EXPORT void FileDataObject_AddFile(void* self, wxString* files)
    {
        ((wxFileDataObject*) self)->AddFile(*files);
    }

    EXPORT int FileDataObject_GetFilenames(void* self, void* list)
    {
        wxArrayString arr = ((wxFileDataObject*) self)->GetFilenames();
        if (list)
        {
            for (unsigned int i = 0; i < arr.GetCount(); i++)
                ((const char**) list)[i] = strdup(arr.Item(i).utf8_string().data());
        }
        return arr.GetCount();
    }

    EXPORT void* BitmapDataObject_Create(wxBitmap* bitmap)
    {
        return (void*) new wxBitmapDataObject(*bitmap);
    }

    EXPORT void* BitmapDataObject_CreateEmpty()
    {
        return (void*) new wxBitmapDataObject();
    }

    EXPORT void BitmapDataObject_Delete(void* self)
    {
        delete (wxBitmapDataObject*) self;
    }

    EXPORT void BitmapDataObject_SetBitmap(void* self, wxBitmap* bitmap)
    {
        ((wxBitmapDataObject*) self)->SetBitmap(*bitmap);
    }

    EXPORT void BitmapDataObject_GetBitmap(void* self, wxBitmap* bitmap)
    {
        *bitmap = ((wxBitmapDataObject*) self)->GetBitmap();
    }

    EXPORT void* DropSource_Create(wxDataObject* data, wxWindow* win, void* copy, void* move,
                                   void* none)
    {
#if (wxCHECK_VERSION(2, 5, 0) && defined(__WXMAC__)) || defined(__WIN32__)
        return (void*) new wxDropSource(*data, win, *((wxCursor*) copy), *((wxCursor*) move),
                                        *((wxCursor*) none));
#else
        return (void*) new wxDropSource(*data, win, *((wxIcon*) copy), *((wxIcon*) move),
                                        *((wxIcon*) none));
#endif
    }

    EXPORT void DropSource_Delete(void* self)
    {
        delete (wxDropSource*) self;
    }

    EXPORT int DropSource_DoDragDrop(void* self, bool move)
    {
        return (int) ((wxDropSource*) self)->DoDragDrop(move);
    }

    EXPORT void* kwxDropTarget_Create(void* self)
    {
        return (void*) new kwxDropTarget(self);
    }

    EXPORT void kwxDropTarget_Delete(void* self)
    {
        delete (kwxDropTarget*) self;
    }

    EXPORT void kwxFileDropTarget_SetOnData(void* self, void* pFunction)
    {
        ((kwxFileDropTarget*) self)->SetOnData((DragThreeFunc) pFunction);
    }

    EXPORT void kwxFileDropTarget_SetOnDrop(void* self, void* pFunction)
    {
        ((kwxFileDropTarget*) self)->SetOnDrop((DragTwoFunc) pFunction);
    }

    EXPORT void kwxFileDropTarget_SetOnEnter(void* self, void* pFunction)
    {
        ((kwxFileDropTarget*) self)->SetOnEnter((DragThreeFunc) pFunction);
    }

    EXPORT void kwxFileDropTarget_SetOnDragOver(void* self, void* pFunction)
    {
        ((kwxFileDropTarget*) self)->SetOnDragOver((DragThreeFunc) pFunction);
    }

    EXPORT void kwxFileDropTarget_SetOnLeave(void* self, void* pFunction)
    {
        ((kwxFileDropTarget*) self)->SetOnLeave((DragZeroFunc) pFunction);
    }

    EXPORT void kwxTextDropTarget_SetOnData(void* self, void* pFunction)
    {
        ((kwxTextDropTarget*) self)->SetOnData((DragThreeFunc) pFunction);
    }

    EXPORT void kwxTextDropTarget_SetOnDrop(void* self, void* pFunction)
    {
        ((kwxTextDropTarget*) self)->SetOnDrop((DragTwoFunc) pFunction);
    }

    EXPORT void kwxTextDropTarget_SetOnEnter(void* self, void* pFunction)
    {
        ((kwxTextDropTarget*) self)->SetOnEnter((DragThreeFunc) pFunction);
    }

    EXPORT void kwxTextDropTarget_SetOnDragOver(void* self, void* pFunction)
    {
        ((kwxTextDropTarget*) self)->SetOnDragOver((DragThreeFunc) pFunction);
    }

    EXPORT void kwxTextDropTarget_SetOnLeave(void* self, void* pFunction)
    {
        ((kwxTextDropTarget*) self)->SetOnLeave((DragZeroFunc) pFunction);
    }

    EXPORT void kwxDropTarget_SetOnData(void* self, void* pFunction)
    {
        ((kwxDropTarget*) self)->SetOnData((DragThreeFunc) pFunction);
    }

    EXPORT void kwxDropTarget_SetOnDrop(void* self, void* pFunction)
    {
        ((kwxDropTarget*) self)->SetOnDrop((DragTwoFunc) pFunction);
    }

    EXPORT void kwxDropTarget_SetOnEnter(void* self, void* pFunction)
    {
        ((kwxDropTarget*) self)->SetOnEnter((DragThreeFunc) pFunction);
    }

    EXPORT void kwxDropTarget_SetOnDragOver(void* self, void* pFunction)
    {
        ((kwxDropTarget*) self)->SetOnDragOver((DragThreeFunc) pFunction);
    }

    EXPORT void kwxDropTarget_SetOnLeave(void* self, void* pFunction)
    {
        ((kwxDropTarget*) self)->SetOnLeave((DragZeroFunc) pFunction);
    }

    EXPORT void wxDropTarget_GetData(void* self)
    {
        ((wxDropTarget*) self)->GetData();
    }

    EXPORT void wxDropTarget_SetDataObject(void* self, void* dataObject)
    {
        ((wxDropTarget*) self)->SetDataObject((wxDataObject*) dataObject);
    }

    EXPORT void* kwxDragDataObject_Create(void* self, wxString* format, void* fnGetDataSize,
                                          void* fnGetDataHere, void* fnSetData)
    {
        return (void*) new kwxDragDataObject(self, *(format), (DataGetDataSize) fnGetDataSize,
                                             (DataGetDataHere) fnGetDataHere,
                                             (DataSetData) fnSetData);
    }

    EXPORT void kwxDragDataObject_Delete(void* self)
    {
        delete (kwxDragDataObject*) self;
    }

    EXPORT void* wxDataObjectComposite_Create()
    {
        return (void*) new wxDataObjectComposite();
    }

    EXPORT void wxDataObjectComposite_Delete(void* self)
    {
        delete (wxDataObjectComposite*) self;
    }

    EXPORT void wxDataObjectComposite_Add(void* self, void* dataObject, bool preferred)
    {
        ((wxDataObjectComposite*) self)->Add((wxDataObjectSimple*) dataObject, preferred);
    }
}
